Step: build-step-credential-initializer:

Step: build-step-git-source:

Step: build-step-jenkins:

Picked up _JAVA_OPTIONS: -Xmx2048m
Started
Running in Durability level: PERFORMANCE_OPTIMIZED
  21.579 [id=23]	WARNING	i.f.k.c.i.VersionUsageUtils#alert: The client is using resource type 'customresourcedefinitions' with unstable version 'v1beta1'
[Pipeline] node
Running on Jenkins in /tmp/jenkinsTests.tmp/jenkins2046145849045573457test/workspace/job
  31.809 [id=42]	WARNING	o.j.plugins.workflow.cps.DSL#invokeStep: Error storing the arguments for step: checkout
org.kohsuke.stapler.NoStaplerConstructorException: There's no @DataBoundConstructor on any constructor of class io.jenkins.jenkinsfile.runner.FileSystemSCM
	at org.kohsuke.stapler.ClassDescriptor.loadConstructorParamNames(ClassDescriptor.java:265)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.<init>(DescribableModel.java:144)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.of(DescribableModel.java:114)
	at org.jenkinsci.plugins.workflow.cps.actions.ArgumentsActionImpl.sanitizeObjectAndRecordMutation(ArgumentsActionImpl.java:294)
	at org.jenkinsci.plugins.workflow.cps.actions.ArgumentsActionImpl.sanitizeMapAndRecordMutation(ArgumentsActionImpl.java:386)
	at org.jenkinsci.plugins.workflow.cps.actions.ArgumentsActionImpl.<init>(ArgumentsActionImpl.java:74)
	at org.jenkinsci.plugins.workflow.cps.DSL.invokeStep(DSL.java:245)
	at org.jenkinsci.plugins.workflow.cps.DSL.invokeMethod(DSL.java:178)
	at org.jenkinsci.plugins.workflow.cps.CpsScript.invokeMethod(CpsScript.java:122)
	at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:48)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)
	at com.cloudbees.groovy.cps.sandbox.DefaultInvoker.methodCall(DefaultInvoker.java:20)
	at com.cloudbees.groovy.cps.impl.ContinuationGroup.methodCall(ContinuationGroup.java:57)
	at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.dispatchOrArg(FunctionCallBlock.java:109)
	at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.fixArg(FunctionCallBlock.java:82)
	at sun.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)
	at com.cloudbees.groovy.cps.impl.PropertyishBlock$ContinuationImpl.get(PropertyishBlock.java:76)
	at com.cloudbees.groovy.cps.LValueBlock$GetAdapter.receive(LValueBlock.java:30)
	at com.cloudbees.groovy.cps.impl.PropertyishBlock$ContinuationImpl.fixName(PropertyishBlock.java:66)
	at sun.reflect.GeneratedMethodAccessor144.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)
	at com.cloudbees.groovy.cps.impl.ConstantBlock.eval(ConstantBlock.java:21)
	at com.cloudbees.groovy.cps.Next.step(Next.java:83)
	at com.cloudbees.groovy.cps.Continuable$1.call(Continuable.java:174)
	at com.cloudbees.groovy.cps.Continuable$1.call(Continuable.java:163)
	at org.codehaus.groovy.runtime.GroovyCategorySupport$ThreadCategoryInfo.use(GroovyCategorySupport.java:129)
	at org.codehaus.groovy.runtime.GroovyCategorySupport.use(GroovyCategorySupport.java:268)
	at com.cloudbees.groovy.cps.Continuable.run0(Continuable.java:163)
	at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.access$101(SandboxContinuable.java:34)
	at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.lambda$run0$0(SandboxContinuable.java:59)
	at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.GroovySandbox.runInSandbox(GroovySandbox.java:108)
	at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.run0(SandboxContinuable.java:58)
	at org.jenkinsci.plugins.workflow.cps.CpsThread.runNextChunk(CpsThread.java:182)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup.run(CpsThreadGroup.java:332)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup.access$200(CpsThreadGroup.java:83)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup$2.call(CpsThreadGroup.java:244)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup$2.call(CpsThreadGroup.java:232)
	at org.jenkinsci.plugins.workflow.cps.CpsVmExecutorService$2.call(CpsVmExecutorService.java:64)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at hudson.remoting.SingleLaneExecutorService$1.run(SingleLaneExecutorService.java:131)
	at jenkins.util.ContextResettingExecutorService$1.run(ContextResettingExecutorService.java:28)
	at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:59)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
[Pipeline] }
[Pipeline] // stage
[Pipeline] withCredentials
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (CI Build and Test)
[Pipeline] dir
Running in /home/jenkins/go/src/github.com/jenkins-x/jx
  33.441 [id=73]	WARNING	o.j.plugins.workflow.cps.DSL#invokeStep: Error storing the arguments for step: checkout
org.kohsuke.stapler.NoStaplerConstructorException: There's no @DataBoundConstructor on any constructor of class io.jenkins.jenkinsfile.runner.FileSystemSCM
	at org.kohsuke.stapler.ClassDescriptor.loadConstructorParamNames(ClassDescriptor.java:265)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.<init>(DescribableModel.java:144)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.of(DescribableModel.java:114)
	at org.jenkinsci.plugins.workflow.cps.actions.ArgumentsActionImpl.sanitizeObjectAndRecordMutation(ArgumentsActionImpl.java:294)
	at org.jenkinsci.plugins.workflow.cps.actions.ArgumentsActionImpl.sanitizeMapAndRecordMutation(ArgumentsActionImpl.java:386)
	at org.jenkinsci.plugins.workflow.cps.actions.ArgumentsActionImpl.<init>(ArgumentsActionImpl.java:74)
	at org.jenkinsci.plugins.workflow.cps.DSL.invokeStep(DSL.java:245)
	at org.jenkinsci.plugins.workflow.cps.DSL.invokeMethod(DSL.java:178)
	at org.jenkinsci.plugins.workflow.cps.CpsScript.invokeMethod(CpsScript.java:122)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:93)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:325)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1213)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1022)
	at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:42)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)
	at org.kohsuke.groovy.sandbox.impl.Checker$1.call(Checker.java:157)
	at org.kohsuke.groovy.sandbox.GroovyInterceptor.onMethodCall(GroovyInterceptor.java:23)
	at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onMethodCall(SandboxInterceptor.java:155)
	at org.kohsuke.groovy.sandbox.impl.Checker$1.call(Checker.java:155)
	at org.kohsuke.groovy.sandbox.impl.Checker.checkedCall(Checker.java:159)
	at org.kohsuke.groovy.sandbox.impl.Checker.checkedCall(Checker.java:129)
	at org.kohsuke.groovy.sandbox.impl.Checker.checkedCall(Checker.java:129)
	at com.cloudbees.groovy.cps.sandbox.SandboxInvoker.methodCall(SandboxInvoker.java:17)
	at com.cloudbees.groovy.cps.impl.ContinuationGroup.methodCall(ContinuationGroup.java:57)
	at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.dispatchOrArg(FunctionCallBlock.java:109)
	at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.fixArg(FunctionCallBlock.java:82)
	at sun.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)
	at com.cloudbees.groovy.cps.impl.PropertyishBlock$ContinuationImpl.get(PropertyishBlock.java:76)
	at com.cloudbees.groovy.cps.LValueBlock$GetAdapter.receive(LValueBlock.java:30)
	at com.cloudbees.groovy.cps.impl.PropertyishBlock$ContinuationImpl.fixName(PropertyishBlock.java:66)
	at sun.reflect.GeneratedMethodAccessor144.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)
	at com.cloudbees.groovy.cps.impl.ConstantBlock.eval(ConstantBlock.java:21)
	at com.cloudbees.groovy.cps.Next.step(Next.java:83)
	at com.cloudbees.groovy.cps.Continuable$1.call(Continuable.java:174)
	at com.cloudbees.groovy.cps.Continuable$1.call(Continuable.java:163)
	at org.codehaus.groovy.runtime.GroovyCategorySupport$ThreadCategoryInfo.use(GroovyCategorySupport.java:129)
	at org.codehaus.groovy.runtime.GroovyCategorySupport.use(GroovyCategorySupport.java:268)
	at com.cloudbees.groovy.cps.Continuable.run0(Continuable.java:163)
	at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.access$101(SandboxContinuable.java:34)
	at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.lambda$run0$0(SandboxContinuable.java:59)
	at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.GroovySandbox.runInSandbox(GroovySandbox.java:108)
	at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.run0(SandboxContinuable.java:58)
	at org.jenkinsci.plugins.workflow.cps.CpsThread.runNextChunk(CpsThread.java:182)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup.run(CpsThreadGroup.java:332)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup.access$200(CpsThreadGroup.java:83)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup$2.call(CpsThreadGroup.java:244)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup$2.call(CpsThreadGroup.java:232)
	at org.jenkinsci.plugins.workflow.cps.CpsVmExecutorService$2.call(CpsVmExecutorService.java:64)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at hudson.remoting.SingleLaneExecutorService$1.run(SingleLaneExecutorService.java:131)
	at jenkins.util.ContextResettingExecutorService$1.run(ContextResettingExecutorService.java:28)
	at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:59)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[Pipeline] {
[Pipeline] checkout
[Pipeline] sh
+ echo building Pull Request for preview pr-2494-1
building Pull Request for preview pr-2494-1
[Pipeline] sh
+ make linux
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 GO111MODULE=on GO15VENDOREXPERIMENT=1 go build -ldflags " -X github.com/jenkins-x/jx/pkg/version.Version=-dev+522a157 -X github.com/jenkins-x/jx/pkg/version.Revision='522a157' -X github.com/jenkins-x/jx/pkg/version.Branch='master' -X github.com/jenkins-x/jx/pkg/version.BuildDate='20181214-15:16:11' -X github.com/jenkins-x/jx/pkg/version.GoVersion='1.11'" -o build/linux/jx cmd/jx/jx.go
go: finding github.com/hashicorp/hcl v0.0.0-20180404174102-ef8a98b0bbce
go: finding github.com/shurcooL/githubv4 v0.0.0-20180509030948-19298c78142b
go: finding github.com/alecthomas/template v0.0.0-20160405071501-a0175ee3bccc
go: finding github.com/peterbourgon/diskv v2.0.1+incompatible
go: finding github.com/shurcooL/graphql v0.0.0-20180514000029-62c9ce094e75
go: finding github.com/gfleury/go-bitbucket-v1 v0.0.0-20181102191809-4910839b609e
go: finding github.com/stretchr/testify v1.2.2
go: finding github.com/Jeffail/gabs v1.1.0
go: finding golang.org/x/sys v0.0.0-20181206074257-70b957f3b65e
go: finding k8s.io/kube-openapi v0.0.0-20180719232738-d8ea2fe547a4
go: finding github.com/blang/semver v3.5.1+incompatible
go: finding github.com/modern-go/reflect2 v0.0.0-20180701023420-4b7aa43c6742
go: finding github.com/prometheus/procfs v0.0.0-20180705121852-ae68e2d4c00f
go: finding github.com/inconshreveable/mousetrap v1.0.0
go: finding github.com/andygrunwald/go-gerrit v0.0.0-20181026193842-43cfd7a94eb4
go: finding github.com/kr/pty v1.1.2
go: finding github.com/fatih/color v1.7.0
go: finding github.com/IBM-Cloud/bluemix-go v0.0.0-20181008063305-d718d474c7c2
go: finding github.com/prometheus/client_model v0.0.0-20180712105110-5c3871d89910
go: finding github.com/kevinburke/ssh_config v0.0.0-20180317175531-9fc7bb800b55
go: finding google.golang.org/appengine v1.1.0
go: finding github.com/Azure/go-autorest v10.14.0+incompatible
go: finding github.com/imdario/mergo v0.3.5
go: finding k8s.io/gengo v0.0.0-20180718083919-906d99f89cd6
go: finding github.com/pierrec/lz4 v2.0.5+incompatible
go: finding github.com/shirou/w32 v0.0.0-20160930032740-bb4de0191aa4
go: finding k8s.io/test-infra v0.0.0-20181113004108-9b11013021d9
go: finding github.com/xanzy/go-gitlab v0.0.0-20180814191223-f3bc634ab936
go: finding github.com/dgrijalva/jwt-go v3.2.0+incompatible
go: finding gopkg.in/inf.v0 v0.9.1
go: finding github.com/Netflix/go-expect v0.0.0-20180814212900-124a37274874
go: finding github.com/stoewer/go-strcase v1.0.1
go: finding github.com/beevik/etree v1.0.1
go: finding github.com/satori/go.uuid v1.2.0
go: finding github.com/gorilla/sessions v1.1.1
go: finding github.com/bwmarrin/snowflake v0.0.0-20180412010544-68117e6bbede
go: finding github.com/pelletier/go-toml v1.2.0
go: finding github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b
go: finding github.com/russross/blackfriday v1.5.1
go: finding github.com/knative/build v0.0.0-20180906201914-846036c8b91d
go: finding github.com/hpcloud/tail v1.0.0
go: finding github.com/onsi/gomega v1.4.1
go: finding github.com/go-ini/ini v1.38.1
go: finding github.com/spf13/pflag v1.0.1
go: finding github.com/src-d/gcfg v1.3.0
go: finding github.com/googleapis/gnostic v0.2.0
go: finding github.com/googleapis/gax-go v2.0.0+incompatible
go: finding k8s.io/code-generator v0.0.0-20181017053441-8c97d6ab64da
go: finding github.com/spf13/cast v1.2.0
go: finding github.com/chromedp/cdproto v0.0.0-20180720050708-57cf4773008d
go: finding github.com/danwakefield/fnmatch v0.0.0-20160403171240-cbb64ac3d964
go: finding github.com/alexflint/go-filemutex v0.0.0-20171028004239-d358565f3c3f
go: finding github.com/golang/protobuf v1.1.0
go: finding github.com/emicklei/go-restful v2.8.0+incompatible
go: finding github.com/StackExchange/wmi v0.0.0-20180116203802-5d049714c4a6
go: finding golang.org/x/crypto v0.0.0-20181203042331-505ab145d0a9
go: finding gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
go: finding github.com/gorilla/securecookie v1.1.1
go: finding github.com/mattn/go-isatty v0.0.3
go: finding github.com/viniciuschiele/tarx v0.0.0-20151205142357-6e3da540444d
go: finding k8s.io/apimachinery v0.0.0-20180621070125-103fd098999d
go: finding github.com/kballard/go-shellquote v0.0.0-20180428030007-95032a82bc51
go: finding github.com/magiconair/properties v1.8.0
go: finding github.com/pkg/errors v0.8.0
go: finding golang.org/x/time v0.0.0-20180412165947-fbb02b2291d2
go: finding github.com/trivago/tgo v1.0.1
go: finding github.com/MakeNowJust/heredoc v0.0.0-20171113091838-e9091a26100e
go: finding github.com/jbrukh/bayesian v0.0.0-20161210175230-bf3f261f9a9c
go: finding github.com/google/gofuzz v0.0.0-20170612174753-24818f796faf
go: finding github.com/shurcooL/go v0.0.0-20180423040247-9e1955d9fb6e
go: finding github.com/heptio/sonobuoy v0.12.0
go: finding github.com/jenkins-x/golang-jenkins v0.0.0-20180919102630-65b83ad42314
go: finding k8s.io/kubernetes v1.11.3
go: finding github.com/fsnotify/fsnotify v1.4.7
go: finding github.com/c2h5oh/datasize v0.0.0-20171227191756-4eba002a5eae
go: finding gopkg.in/src-d/go-billy.v4 v4.2.0
go: finding github.com/rodaine/hclencoder v0.0.0-20180926060551-0680c4321930
go: finding github.com/hashicorp/golang-lru v0.0.0-20180201235237-0fb14efe8c47
go: finding github.com/nlopes/slack v0.0.0-20180721202243-347a74b1ea30
go: finding gopkg.in/warnings.v0 v0.1.2
go: finding github.com/mattn/go-colorable v0.0.9
go: finding github.com/golang/snappy v0.0.0-20180518054509-2e65f85255db
go: finding github.com/mitchellh/mapstructure v0.0.0-20180715050151-f15292f7a699
go: finding github.com/fatih/structs v1.0.0
go: finding github.com/onsi/ginkgo v1.6.0
go: finding github.com/sirupsen/logrus v1.0.6
go: finding gopkg.in/src-d/go-git.v4 v4.5.0
go: finding github.com/spf13/afero v1.1.1
go: finding k8s.io/helm v2.7.2+incompatible
go: finding github.com/jbenet/go-context v0.0.0-20150711004518-d14ea06fba99
go: finding github.com/hashicorp/go-retryablehttp v0.0.0-20180718195005-e651d75abec6
go: finding github.com/gogo/protobuf v1.1.1
go: finding github.com/prometheus/client_golang v0.8.0
go: finding github.com/hashicorp/go-version v0.0.0-20180716215031-270f2f71b1ee
go: finding k8s.io/metrics v0.0.0-20180620010437-b11cf31b380b
go: finding github.com/chai2010/gettext-go v0.0.0-20170215093142-bf70f2a70fb1
go: finding gopkg.in/fsnotify.v1 v1.4.7
go: finding github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: finding github.com/spf13/viper v1.0.2
go: finding github.com/jenkins-x/draft-repo v0.0.0-20180417100212-2f66cc518135
go: finding github.com/prometheus/common v0.0.0-20180518154759-7600349dcfe1
go: finding github.com/gorilla/mux v1.6.2
go: finding golang.org/x/image v0.0.0-20180708004352-c73c2afc3b81
go: finding github.com/chromedp/chromedp v0.1.1
go: finding golang.org/x/oauth2 v0.0.0-20180620175406-ef147856a6dd
go: finding github.com/hinshun/vt10x v0.0.0-20180809195222-d55458df857c
go: finding cloud.google.com/go v0.25.0
go: finding github.com/ghodss/yaml v1.0.0
go: finding github.com/banzaicloud/bank-vaults v0.0.0-20181129101211-e31657d7c4fe
go: finding github.com/xanzy/ssh-agent v0.2.0
go: finding github.com/pborman/uuid v0.0.0-20170612153648-e790cca94e6c
go: finding gopkg.in/alecthomas/kingpin.v2 v2.2.6
go: finding github.com/Pallinder/go-randomdata v0.0.0-20180616180521-15df0648130a
go: finding github.com/evanphx/json-patch v4.1.0+incompatible
go: finding github.com/spf13/jwalterweatherman v0.0.0-20180109140146-7c0cea34c8ec
go: finding github.com/petergtz/pegomock v0.0.0-20181008215750-9750219ad78b
go: finding github.com/pkg/browser v0.0.0-20170505125900-c90ca0c84f15
go: finding github.com/pelletier/go-buffruneio v0.2.0
go: finding github.com/docker/spdystream v0.0.0-20170912183627-bc6354cbbc29
go: finding k8s.io/client-go v8.0.0+incompatible
go: finding github.com/hashicorp/go-rootcerts v0.0.0-20160503143440-6bb64b370b90
go: finding github.com/acarl005/stripansi v0.0.0-20180116102854-5a71ef0e047d
go: finding golang.org/x/image v0.0.0-20180628062038-cc896f830ced
go: finding github.com/alecthomas/units v0.0.0-20151022065526-2efee857e7cf
go: finding gopkg.in/AlecAivazis/survey.v1 v1.6.2
go: finding github.com/andygrunwald/go-jira v1.5.0
go: finding github.com/hashicorp/go-sockaddr v0.0.0-20180320115054-6d291a969b86
go: finding github.com/beorn7/perks v0.0.0-20180321164747-3a771d992973
go: finding github.com/knq/sysutil v0.0.0-20180306023629-0218e141a794
go: finding github.com/Masterminds/semver v1.4.2
go: finding github.com/emirpasic/gods v1.9.0
go: finding github.com/wbrefvem/go-bitbucket v0.0.0-20180917214347-1c96061fe622
go: finding google.golang.org/api v0.0.0-20180724000608-2c45710c7f3f
go: finding github.com/denormal/go-gitignore v0.0.0-20180713143441-75ce8f3e513c
go: finding github.com/mailru/easyjson v0.0.0-20180606163543-3fdea8d05856
go: finding github.com/go-ole/go-ole v1.2.1
go: finding github.com/rifflock/lfshook v0.0.0-20180227222202-bf539943797a
go: finding golang.org/x/sync v0.0.0-20180314180146-1d60e4601c6f
go: finding github.com/petar/GoLLRB v0.0.0-20130427215148-53be0d36a84c
go: finding google.golang.org/genproto v0.0.0-20180722052100-02b4e9547331
go: finding gopkg.in/yaml.v2 v2.2.1
go: finding k8s.io/cli-runtime v0.0.0-20181026155151-1ee5ba10d7e3
go: finding github.com/hashicorp/vault v0.11.4
go: finding github.com/Azure/draft v0.15.0
go: finding github.com/hashicorp/go-cleanhttp v0.5.0
go: finding k8s.io/api v0.0.0-20180628040859-072894a440bd
go: finding github.com/sergi/go-diff v1.0.0
go: finding github.com/gorilla/context v1.1.1
go: finding github.com/knq/snaker v0.0.0-20180306023312-d9ad1e7f342a
go: finding github.com/gobwas/glob v0.2.3
go: finding google.golang.org/grpc v1.13.0
go: finding github.com/gophercloud/gophercloud v0.0.0-20180721014243-9bb899a7c1d9
go: finding github.com/aws/aws-sdk-go v1.15.50
go: finding github.com/chromedp/cdproto v0.0.0-20180703215205-c125a34ea3b3
go: finding github.com/BurntSushi/toml v0.3.0
go: finding github.com/ryanuber/go-glob v0.0.0-20170128012129-256dc444b735
go: finding github.com/gregjones/httpcache v0.0.0-20180305231024-9cad4c3443a7
go: finding github.com/cpuguy83/go-md2man v1.0.8
go: finding github.com/sethvargo/go-password v0.1.2
go: finding github.com/disintegration/imaging v1.4.2
go: finding github.com/codeship/codeship-go v0.0.0-20180717142545-7793ca823354
go: finding github.com/bouk/monkey v1.0.0
go: finding github.com/google/go-querystring v0.0.0-20170111101155-53e6ce116135
go: finding github.com/shirou/gopsutil v0.0.0-20180901134234-eb1f1ab16f2e
go: finding github.com/mitchellh/go-homedir v0.0.0-20180523094522-3864e76763d9
go: finding github.com/jenkins-x/chyle v0.0.0-20180226080600-68f7a93a63ec
go: finding github.com/mgutz/ansi v0.0.0-20170206155736-9520e82c474b
go: finding github.com/google/go-github v17.0.0+incompatible
go: finding github.com/spf13/cobra v0.0.3
go: finding golang.org/x/tools v0.0.0-20180723204246-ded554d0681e
go: finding gopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405
go: finding github.com/hashicorp/go-multierror v1.0.0
go: finding go.opencensus.io v0.14.0
go: finding github.com/matttproud/golang_protobuf_extensions v1.0.1
go: finding code.gitea.io/sdk v0.0.0-20180702024448-79a281c4e34a
go: finding github.com/go-openapi/spec v0.17.1
go: finding github.com/json-iterator/go v0.0.0-20180701071628-ab8a2e0c74be
go: finding github.com/jmespath/go-jmespath v0.0.0-20160202185014-0b12d6b521d8
go: finding github.com/gorilla/websocket v1.2.0
go: finding github.com/go-ini/ini v1.25.4
go: finding github.com/cenkalti/backoff v2.0.0+incompatible
go: finding github.com/google/btree v0.0.0-20180124185431-e89373fe6b4a
go: finding gopkg.in/robfig/cron.v2 v2.0.0-20150107220207-be2e0b0deed5
go: finding github.com/operator-framework/operator-sdk v0.0.0-20181011175812-913cbf711929
go: finding k8s.io/apiextensions-apiserver v0.0.0-20180621085152-bbc52469f98b
go: finding github.com/hashicorp/errwrap v1.0.0
go: finding github.com/go-openapi/jsonreference v0.17.0
go: finding github.com/go-openapi/jsonpointer v0.17.0
go: finding github.com/davecgh/go-spew v1.1.1
go: finding golang.org/x/text v0.3.0
go: finding github.com/PuerkitoBio/purell v1.1.0
go: finding golang.org/x/net v0.0.0-20181005035420-146acd28ed58
go: finding github.com/go-openapi/swag v0.17.0
go: finding github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578
go: finding github.com/pmezard/go-difflib v1.0.0
go: finding github.com/mailru/easyjson v0.0.0-20180823135443-60711f1a8329
go: downloading github.com/chromedp/chromedp v0.1.1
go: downloading k8s.io/client-go v8.0.0+incompatible
go: downloading gopkg.in/yaml.v2 v2.2.1
go: downloading github.com/spf13/cobra v0.0.3
go: downloading github.com/jenkins-x/draft-repo v0.0.0-20180417100212-2f66cc518135
go: downloading k8s.io/api v0.0.0-20180628040859-072894a440bd
go: downloading gopkg.in/AlecAivazis/survey.v1 v1.6.2
go: downloading github.com/denormal/go-gitignore v0.0.0-20180713143441-75ce8f3e513c
go: downloading github.com/pkg/errors v0.8.0
go: downloading github.com/rodaine/hclencoder v0.0.0-20180926060551-0680c4321930
go: downloading github.com/IBM-Cloud/bluemix-go v0.0.0-20181008063305-d718d474c7c2
go: downloading github.com/aws/aws-sdk-go v1.15.50
go: downloading github.com/hashicorp/vault v0.11.4
go: downloading k8s.io/apimachinery v0.0.0-20180621070125-103fd098999d
go: downloading github.com/blang/semver v3.5.1+incompatible
go: downloading github.com/hashicorp/go-version v0.0.0-20180716215031-270f2f71b1ee
go: downloading github.com/heptio/sonobuoy v0.12.0
go: downloading github.com/pborman/uuid v0.0.0-20170612153648-e790cca94e6c
go: downloading github.com/onsi/ginkgo v1.6.0
go: downloading golang.org/x/sync v0.0.0-20180314180146-1d60e4601c6f
go: downloading github.com/knative/build v0.0.0-20180906201914-846036c8b91d
go: downloading github.com/gogo/protobuf v1.1.1
go: downloading github.com/stretchr/testify v1.2.2
go: downloading k8s.io/apiextensions-apiserver v0.0.0-20180621085152-bbc52469f98b
go: downloading github.com/google/gofuzz v0.0.0-20170612174753-24818f796faf
go: downloading github.com/chromedp/cdproto v0.0.0-20180720050708-57cf4773008d
go: downloading github.com/alexflint/go-filemutex v0.0.0-20171028004239-d358565f3c3f
go: downloading golang.org/x/net v0.0.0-20181005035420-146acd28ed58
go: downloading github.com/jenkins-x/chyle v0.0.0-20180226080600-68f7a93a63ec
go: downloading k8s.io/metrics v0.0.0-20180620010437-b11cf31b380b
go: downloading gopkg.in/src-d/go-git.v4 v4.5.0
go: downloading github.com/pmezard/go-difflib v1.0.0
go: downloading github.com/disintegration/imaging v1.4.2
go: downloading github.com/jenkins-x/golang-jenkins v0.0.0-20180919102630-65b83ad42314
go: downloading github.com/stoewer/go-strcase v1.0.1
go: downloading github.com/mailru/easyjson v0.0.0-20180823135443-60711f1a8329
go: downloading k8s.io/test-infra v0.0.0-20181113004108-9b11013021d9
go: downloading github.com/google/go-github v17.0.0+incompatible
go: downloading github.com/fatih/color v1.7.0
go: downloading k8s.io/helm v2.7.2+incompatible
go: downloading github.com/hashicorp/hcl v0.0.0-20180404174102-ef8a98b0bbce
go: downloading github.com/codeship/codeship-go v0.0.0-20180717142545-7793ca823354
go: downloading github.com/banzaicloud/bank-vaults v0.0.0-20181129101211-e31657d7c4fe
go: downloading github.com/sergi/go-diff v1.0.0
go: downloading golang.org/x/image v0.0.0-20180708004352-c73c2afc3b81
go: downloading github.com/ghodss/yaml v1.0.0
go: downloading github.com/sethvargo/go-password v0.1.2
go: downloading github.com/imdario/mergo v0.3.5
go: downloading github.com/Azure/draft v0.15.0
go: downloading gopkg.in/src-d/go-billy.v4 v4.2.0
go: downloading github.com/kballard/go-shellquote v0.0.0-20180428030007-95032a82bc51
go: downloading github.com/nlopes/slack v0.0.0-20180721202243-347a74b1ea30
go: downloading github.com/shirou/gopsutil v0.0.0-20180901134234-eb1f1ab16f2e
go: downloading github.com/json-iterator/go v0.0.0-20180701071628-ab8a2e0c74be
go: downloading github.com/gorilla/mux v1.6.2
go: downloading github.com/fatih/structs v1.0.0
go: downloading github.com/google/go-querystring v0.0.0-20170111101155-53e6ce116135
go: downloading github.com/satori/go.uuid v1.2.0
go: downloading golang.org/x/crypto v0.0.0-20181203042331-505ab145d0a9
go: downloading github.com/davecgh/go-spew v1.1.1
go: downloading github.com/sirupsen/logrus v1.0.6
go: downloading github.com/mitchellh/mapstructure v0.0.0-20180715050151-f15292f7a699
go: downloading github.com/rifflock/lfshook v0.0.0-20180227222202-bf539943797a
go: downloading github.com/hpcloud/tail v1.0.0
go: downloading gopkg.in/inf.v0 v0.9.1
go: downloading github.com/spf13/pflag v1.0.1
go: downloading golang.org/x/oauth2 v0.0.0-20180620175406-ef147856a6dd
go: downloading github.com/beevik/etree v1.0.1
go: downloading github.com/gregjones/httpcache v0.0.0-20180305231024-9cad4c3443a7
go: downloading github.com/operator-framework/operator-sdk v0.0.0-20181011175812-913cbf711929
go: downloading github.com/golang/protobuf v1.1.0
go: downloading github.com/Pallinder/go-randomdata v0.0.0-20180616180521-15df0648130a
go: downloading github.com/andygrunwald/go-gerrit v0.0.0-20181026193842-43cfd7a94eb4
go: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b
go: downloading github.com/andygrunwald/go-jira v1.5.0
go: downloading github.com/gophercloud/gophercloud v0.0.0-20180721014243-9bb899a7c1d9
go: downloading code.gitea.io/sdk v0.0.0-20180702024448-79a281c4e34a
go: downloading github.com/spf13/viper v1.0.2
go: downloading github.com/viniciuschiele/tarx v0.0.0-20151205142357-6e3da540444d
go: downloading github.com/gfleury/go-bitbucket-v1 v0.0.0-20181102191809-4910839b609e
go: downloading github.com/gorilla/websocket v1.2.0
go: downloading github.com/Masterminds/semver v1.4.2
go: downloading github.com/hashicorp/go-retryablehttp v0.0.0-20180718195005-e651d75abec6
go: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: downloading github.com/gobwas/glob v0.2.3
go: downloading github.com/peterbourgon/diskv v2.0.1+incompatible
go: downloading github.com/magiconair/properties v1.8.0
go: downloading github.com/google/btree v0.0.0-20180124185431-e89373fe6b4a
go: downloading github.com/emirpasic/gods v1.9.0
go: downloading github.com/mattn/go-isatty v0.0.3
go: downloading github.com/mattn/go-colorable v0.0.9
go: downloading github.com/Jeffail/gabs v1.1.0
go: downloading github.com/cpuguy83/go-md2man v1.0.8
go: downloading github.com/jbenet/go-context v0.0.0-20150711004518-d14ea06fba99
go: downloading github.com/src-d/gcfg v1.3.0
go: downloading github.com/xanzy/go-gitlab v0.0.0-20180814191223-f3bc634ab936
go: downloading github.com/googleapis/gnostic v0.2.0
go: downloading github.com/modern-go/reflect2 v0.0.0-20180701023420-4b7aa43c6742
go: downloading github.com/knq/sysutil v0.0.0-20180306023629-0218e141a794
go: downloading github.com/hashicorp/go-cleanhttp v0.5.0
go: downloading github.com/wbrefvem/go-bitbucket v0.0.0-20180917214347-1c96061fe622
go: downloading github.com/hashicorp/errwrap v1.0.0
go: downloading github.com/BurntSushi/toml v0.3.0
go: downloading github.com/danwakefield/fnmatch v0.0.0-20160403171240-cbb64ac3d964
go: downloading github.com/c2h5oh/datasize v0.0.0-20171227191756-4eba002a5eae
go: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
go: downloading github.com/trivago/tgo v1.0.1
go: downloading github.com/mgutz/ansi v0.0.0-20170206155736-9520e82c474b
go: downloading github.com/mitchellh/go-homedir v0.0.0-20180523094522-3864e76763d9
go: downloading github.com/hashicorp/golang-lru v0.0.0-20180201235237-0fb14efe8c47
go: downloading golang.org/x/sys v0.0.0-20181206074257-70b957f3b65e
go: downloading github.com/go-ini/ini v1.38.1
go: downloading github.com/cenkalti/backoff v2.0.0+incompatible
go: downloading github.com/xanzy/ssh-agent v0.2.0
go: downloading gopkg.in/fsnotify.v1 v1.4.7
go: downloading golang.org/x/text v0.3.0
go: downloading github.com/Azure/go-autorest v10.14.0+incompatible
go: downloading github.com/pkg/browser v0.0.0-20170505125900-c90ca0c84f15
go: downloading github.com/fsnotify/fsnotify v1.4.7
go: downloading github.com/kevinburke/ssh_config v0.0.0-20180317175531-9fc7bb800b55
go: downloading github.com/jmespath/go-jmespath v0.0.0-20160202185014-0b12d6b521d8
go: downloading github.com/hashicorp/go-multierror v1.0.0
go: downloading github.com/pelletier/go-buffruneio v0.2.0
go: downloading github.com/spf13/afero v1.1.1
go: downloading github.com/prometheus/client_golang v0.8.0
go: downloading gopkg.in/robfig/cron.v2 v2.0.0-20150107220207-be2e0b0deed5
go: downloading github.com/pelletier/go-toml v1.2.0
go: downloading github.com/spf13/jwalterweatherman v0.0.0-20180109140146-7c0cea34c8ec
go: downloading cloud.google.com/go v0.25.0
go: downloading github.com/MakeNowJust/heredoc v0.0.0-20171113091838-e9091a26100e
go: downloading github.com/russross/blackfriday v1.5.1
go: downloading github.com/prometheus/common v0.0.0-20180518154759-7600349dcfe1
go: downloading github.com/gorilla/sessions v1.1.1
go: downloading github.com/beorn7/perks v0.0.0-20180321164747-3a771d992973
go: downloading github.com/pierrec/lz4 v2.0.5+incompatible
go: downloading golang.org/x/time v0.0.0-20180412165947-fbb02b2291d2
go: downloading github.com/jbrukh/bayesian v0.0.0-20161210175230-bf3f261f9a9c
go: downloading github.com/dgrijalva/jwt-go v3.2.0+incompatible
go: downloading github.com/gorilla/context v1.1.1
go: downloading gopkg.in/warnings.v0 v0.1.2
go: downloading github.com/matttproud/golang_protobuf_extensions v1.0.1
go: downloading github.com/ryanuber/go-glob v0.0.0-20170128012129-256dc444b735
go: downloading github.com/spf13/cast v1.2.0
go: downloading github.com/shurcooL/githubv4 v0.0.0-20180509030948-19298c78142b
go: downloading github.com/hashicorp/go-sockaddr v0.0.0-20180320115054-6d291a969b86
go: downloading github.com/prometheus/client_model v0.0.0-20180712105110-5c3871d89910
go: downloading github.com/golang/snappy v0.0.0-20180518054509-2e65f85255db
go: downloading github.com/prometheus/procfs v0.0.0-20180705121852-ae68e2d4c00f
go: downloading k8s.io/kube-openapi v0.0.0-20180719232738-d8ea2fe547a4
go: downloading github.com/shurcooL/graphql v0.0.0-20180514000029-62c9ce094e75
go: downloading github.com/gorilla/securecookie v1.1.1
go: downloading github.com/bwmarrin/snowflake v0.0.0-20180412010544-68117e6bbede
go: downloading github.com/shurcooL/go v0.0.0-20180423040247-9e1955d9fb6e
go: downloading google.golang.org/api v0.0.0-20180724000608-2c45710c7f3f
go: downloading github.com/hashicorp/go-rootcerts v0.0.0-20160503143440-6bb64b370b90
go: downloading github.com/docker/spdystream v0.0.0-20170912183627-bc6354cbbc29
go: downloading github.com/googleapis/gax-go v2.0.0+incompatible
go: downloading google.golang.org/grpc v1.13.0
go: downloading google.golang.org/genproto v0.0.0-20180722052100-02b4e9547331
go: downloading go.opencensus.io v0.14.0
[Pipeline] sh
                                                    + test 0 -eq 0
[Pipeline] sh
+ make test-slow-integration
go: downloading github.com/Netflix/go-expect v0.0.0-20180814212900-124a37274874
go: downloading github.com/petergtz/pegomock v0.0.0-20181008215750-9750219ad78b
go: downloading github.com/hinshun/vt10x v0.0.0-20180809195222-d55458df857c
go: downloading github.com/kr/pty v1.1.2
go: downloading github.com/acarl005/stripansi v0.0.0-20180116102854-5a71ef0e047d
go: downloading github.com/onsi/gomega v1.4.1
go: downloading github.com/bouk/monkey v1.0.0
?   	github.com/jenkins-x/jx/cmd/ip	[no test files]
?   	github.com/jenkins-x/jx/cmd/jx	[no test files]
?   	github.com/jenkins-x/jx/cmd/jx/app	[no test files]
?   	github.com/jenkins-x/jx/pkg/addon	[no test files]
?   	github.com/jenkins-x/jx/pkg/apis/jenkins.io	[no test files]
?   	github.com/jenkins-x/jx/pkg/apis/jenkins.io/v1	[no test files]
ok  	github.com/jenkins-x/jx/pkg/auth	0.195s	coverage: 33.7% of statements
?   	github.com/jenkins-x/jx/pkg/auth/mocks	[no test files]
ok  	github.com/jenkins-x/jx/pkg/binaries	0.238s	coverage: 55.6% of statements
ok  	github.com/jenkins-x/jx/pkg/buildnum	0.345s	coverage: 45.2% of statements
?   	github.com/jenkins-x/jx/pkg/buildnum/mocks	[no test files]
?   	github.com/jenkins-x/jx/pkg/buildnum/mocks/matchers	[no test files]
ok  	github.com/jenkins-x/jx/pkg/builds	0.431s	coverage: 48.9% of statements
?   	github.com/jenkins-x/jx/pkg/certmanager	[no test files]
?   	github.com/jenkins-x/jx/pkg/chats	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/clientset/versioned	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/clientset/versioned/fake	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/clientset/versioned/scheme	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/clientset/versioned/typed/jenkins.io/v1	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/clientset/versioned/typed/jenkins.io/v1/fake	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/informers/externalversions	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/informers/externalversions/internalinterfaces	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/informers/externalversions/jenkins.io	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/informers/externalversions/jenkins.io/v1	[no test files]
?   	github.com/jenkins-x/jx/pkg/client/listers/jenkins.io/v1	[no test files]
ok  	github.com/jenkins-x/jx/pkg/cloud/aks	0.214s	coverage: 81.2% of statements
ok  	github.com/jenkins-x/jx/pkg/cloud/amazon	0.400s	coverage: 10.9% of statements
ok  	github.com/jenkins-x/jx/pkg/cloud/gke	0.426s	coverage: 3.4% of statements
?   	github.com/jenkins-x/jx/pkg/cloud/gke/vault	[no test files]
?   	github.com/jenkins-x/jx/pkg/cloud/iks	[no test files]
?   	github.com/jenkins-x/jx/pkg/cloud/oke	[no test files]
ok  	github.com/jenkins-x/jx/pkg/config	0.457s	coverage: 21.1% of statements
ok  	github.com/jenkins-x/jx/pkg/cve	0.458s	coverage: 43.0% of statements
?   	github.com/jenkins-x/jx/pkg/draft	[no test files]
?   	github.com/jenkins-x/jx/pkg/expose	[no test files]
ok  	github.com/jenkins-x/jx/pkg/extensions	0.406s	coverage: 19.4% of statements
ok  	github.com/jenkins-x/jx/pkg/gits	64.858s	coverage: 24.0% of statements
?   	github.com/jenkins-x/jx/pkg/gits/mocks	[no test files]
?   	github.com/jenkins-x/jx/pkg/gits/mocks/matchers	[no test files]
ok  	github.com/jenkins-x/jx/pkg/helm	0.606s	coverage: 29.7% of statements
?   	github.com/jenkins-x/jx/pkg/helm/mocks	[no test files]
ok  	github.com/jenkins-x/jx/pkg/io	0.465s	coverage: 80.6% of statements
ok  	github.com/jenkins-x/jx/pkg/io/secrets	0.287s	coverage: 52.4% of statements
?   	github.com/jenkins-x/jx/pkg/issues	[no test files]
?   	github.com/jenkins-x/jx/pkg/jenkins	[no test files]
?   	github.com/jenkins-x/jx/pkg/jenkins/fake	[no test files]
ok  	github.com/jenkins-x/jx/pkg/jenkinsfile	0.177s	coverage: 12.0% of statements
Downloading https://github.com/weaveworks/eksctl/releases/download/0.1.11/eksctl_Linux_amd64.tar.gz to /tmp/common_install_test640934438/bin/eksctl.tar.gz...
Downloaded /tmp/common_install_test640934438/bin/eksctl.tar.gz
Creating fake Pull Request for env dev branch add-app-example-app-0.0.1 title Add example-app 0.0.1 message Add app example-app 0.0.1 with number 1 and URL https://github.com/myorg/environment-myorg-my-app-dev/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/myorg/environment-myorg-my-app-dev/pulls/1
Added app via Pull Request https://github.com/myorg/environment-myorg-my-app-dev/pulls/1
Job already exists in Jenkins at 
Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.1 title myrepo to 1.0.1 message Promote myrepo to version 1.0.1 with number 1 and URL https://github.com/jstrachan/environment-staging/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/jstrachan/environment-staging/pulls/1
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-1 repo myrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.1 title myrepo to 1.0.1 message Promote myrepo to version 1.0.1 with number 2 and URL https://github.com/jstrachan/environment-staging/pulls/2
Creating fake PullRequest number 2 at URL https://github.com/jstrachan/environment-staging/pulls/2
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-1 repo myrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.1 title myrepo to 1.0.1 message Promote myrepo to version 1.0.1 with number 3 and URL https://github.com/jstrachan/environment-staging/pulls/3
Creating fake PullRequest number 3 at URL https://github.com/jstrachan/environment-staging/pulls/3
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-1 repo myrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
PR https://github.com/jstrachan/environment-staging/pulls/1 is now merged
Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.1 title myrepo to 1.0.1 message Promote myrepo to version 1.0.1 with number 4 and URL https://github.com/jstrachan/environment-staging/pulls/4
Creating fake PullRequest number 4 at URL https://github.com/jstrachan/environment-staging/pulls/4
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-1 repo myrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
PR https://github.com/jstrachan/environment-staging/pulls/1 has commit status success
Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.1 title myrepo to 1.0.1 message Promote myrepo to version 1.0.1 with number 5 and URL https://github.com/jstrachan/environment-staging/pulls/5
Creating fake PullRequest number 5 at URL https://github.com/jstrachan/environment-staging/pulls/5
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-1 repo myrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

--- FAIL: TestSequentialWorkflow (15.19s)
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:92
        	Error:      	Missing Promote
        	Test:       	TestSequentialWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-1 for Environment staging
    test_helpers.go:278: 
        	Error Trace:	test_helpers.go:278
        	            				controller_workflow_integration_test.go:93
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestSequentialWorkflow
        	Messages:   	PipelineActivity status for jstrachan-myrepo-master-1
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:118
        	Error:      	Missing Promote
        	Test:       	TestSequentialWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-1 for Environment staging
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:119
        	Error:      	Missing Promote
        	Test:       	TestSequentialWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-1 for Environment production
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:120
        	Error:      	Missing Promote
        	Test:       	TestSequentialWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-1 for Environment production
    test_helpers.go:366: 
        	Error Trace:	test_helpers.go:366
        	            				controller_workflow_integration_test.go:121
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestSequentialWorkflow
        	Messages:   	activity status for PipelineActivity jstrachan-myrepo-master-1
    test_helpers.go:413: 
        	Error Trace:	test_helpers.go:413
        	            				controller_workflow_integration_test.go:123
        	Error:      	Expected value not to be nil.
        	Test:       	TestSequentialWorkflow
        	Messages:   	No PullRequest found on repository jstrachan/environment-production for number #1
Creating PR for environment staging from PipelineActivity jstrachan-manual-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app manual version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-manual-1.0.1 title manual to 1.0.1 message Promote manual to version 1.0.1 with number 1 and URL https://github.com/jstrachan/environment-staging/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/jstrachan/environment-staging/pulls/1
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-manual-master-1 repo manual version 1.0.1 with workflow default: invalid JSON document
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-manual-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: manual
  gitUrl: https://github.com/jstrachan/manual.git
  pipeline: jstrachan/manual/master
  version: 1.0.1
  workflow: default
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-manual-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: manual
  gitUrl: https://github.com/jstrachan/manual.git
  pipeline: jstrachan/manual/master
  version: 1.0.1
  workflow: default
status: {}

Creating PR for environment staging from PipelineActivity jstrachan-manual-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app manual version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-manual-1.0.1 title manual to 1.0.1 message Promote manual to version 1.0.1 with number 2 and URL https://github.com/jstrachan/environment-staging/pulls/2
Creating fake PullRequest number 2 at URL https://github.com/jstrachan/environment-staging/pulls/2
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-manual-master-1 repo manual version 1.0.1 with workflow default: invalid JSON document
PR https://github.com/jstrachan/environment-staging/pulls/1 is now merged
PR https://github.com/jstrachan/environment-staging/pulls/1 has commit status success
Creating PR for environment staging from PipelineActivity jstrachan-manual-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app manual version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-manual-1.0.1 title manual to 1.0.1 message Promote manual to version 1.0.1 with number 3 and URL https://github.com/jstrachan/environment-staging/pulls/3
Creating fake PullRequest number 3 at URL https://github.com/jstrachan/environment-staging/pulls/3
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-manual-master-1 repo manual version 1.0.1 with workflow default: invalid JSON document
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-manual-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: manual
  gitUrl: https://github.com/jstrachan/manual.git
  pipeline: jstrachan/manual/master
  version: 1.0.1
  workflow: default
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-manual-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: manual
  gitUrl: https://github.com/jstrachan/manual.git
  pipeline: jstrachan/manual/master
  version: 1.0.1
  workflow: default
status: {}

Promoting to production version 1.0.1 for app manual
Promoting app manual version 1.0.1 to namespace jx-production
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env production branch promote-manual-1.0.1 title manual to 1.0.1 message Promote manual to version 1.0.1 with number 1 and URL https://github.com/jstrachan/environment-production/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/jstrachan/environment-production/pulls/1
Failed to update PipelineActivity: invalid JSON document
--- FAIL: TestWorkflowManualPromote (12.10s)
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:189
        	Error:      	Missing Promote
        	Test:       	TestWorkflowManualPromote
        	Messages:   	No Promote found on PipelineActivity jstrachan-manual-master-1 for Environment staging
    test_helpers.go:278: 
        	Error Trace:	test_helpers.go:278
        	            				controller_workflow_integration_test.go:190
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestWorkflowManualPromote
        	Messages:   	PipelineActivity status for jstrachan-manual-master-1
    test_helpers.go:278: 
        	Error Trace:	test_helpers.go:278
        	            				controller_workflow_integration_test.go:205
        	Error:      	Not equal: 
        	            	expected: "Succeeded"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Succeeded
        	            	+
        	Test:       	TestWorkflowManualPromote
        	Messages:   	PipelineActivity status for jstrachan-manual-master-1
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:208
        	Error:      	Missing Promote
        	Test:       	TestWorkflowManualPromote
        	Messages:   	No Promote found on PipelineActivity jstrachan-manual-master-1 for Environment staging
    test_helpers.go:377: 
        	Error Trace:	test_helpers.go:377
        	            				controller_workflow_integration_test.go:209
        	Error:      	Not equal: 
        	            	expected: "Succeeded"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Succeeded
        	            	+
        	Test:       	TestWorkflowManualPromote
        	Messages:   	PipelineActivity status for jstrachan-manual-master-1
    test_helpers.go:378: 
        	Error Trace:	test_helpers.go:378
        	            				controller_workflow_integration_test.go:209
        	Error:      	Not equal: 
        	            	expected: "Succeeded"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Succeeded
        	            	+
        	Test:       	TestWorkflowManualPromote
        	Messages:   	PipelineActivity workflow status for jstrachan-manual-master-1
    controller_workflow_integration_test.go:229: 
        	Error Trace:	controller_workflow_integration_test.go:229
        	Error:      	Received unexpected error:
        	            	invalid JSON document
        	Test:       	TestWorkflowManualPromote
Creating PR for environment a from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-a
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env a branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 1 and URL https://github.com/jstrachan/environment-a/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/jstrachan/environment-a/pulls/1
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Creating PR for environment b from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-b
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env b branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 1 and URL https://github.com/jstrachan/environment-b/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/jstrachan/environment-b/pulls/1
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: c as precondition Environment: a as no status
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

Creating PR for environment a from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-a
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env a branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 2 and URL https://github.com/jstrachan/environment-a/pulls/2
Creating fake PullRequest number 2 at URL https://github.com/jstrachan/environment-a/pulls/2
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Creating PR for environment b from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-b
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env b branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 2 and URL https://github.com/jstrachan/environment-b/pulls/2
Creating fake PullRequest number 2 at URL https://github.com/jstrachan/environment-b/pulls/2
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: c as precondition Environment: a as no status
Creating PR for environment a from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-a
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env a branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 3 and URL https://github.com/jstrachan/environment-a/pulls/3
Creating fake PullRequest number 3 at URL https://github.com/jstrachan/environment-a/pulls/3
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Creating PR for environment b from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-b
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env b branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 3 and URL https://github.com/jstrachan/environment-b/pulls/3
Creating fake PullRequest number 3 at URL https://github.com/jstrachan/environment-b/pulls/3
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: c as precondition Environment: a as no status
PR https://github.com/jstrachan/environment-a/pulls/1 is now merged
Creating PR for environment a from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-a
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env a branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 4 and URL https://github.com/jstrachan/environment-a/pulls/4
Creating fake PullRequest number 4 at URL https://github.com/jstrachan/environment-a/pulls/4
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Creating PR for environment b from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-b
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env b branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 4 and URL https://github.com/jstrachan/environment-b/pulls/4
Creating fake PullRequest number 4 at URL https://github.com/jstrachan/environment-b/pulls/4
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: c as precondition Environment: a as no status
PR https://github.com/jstrachan/environment-a/pulls/1 has commit status success
Creating PR for environment a from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-a
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env a branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 5 and URL https://github.com/jstrachan/environment-a/pulls/5
Creating fake PullRequest number 5 at URL https://github.com/jstrachan/environment-a/pulls/5
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Creating PR for environment b from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-b
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env b branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 5 and URL https://github.com/jstrachan/environment-b/pulls/5
Creating fake PullRequest number 5 at URL https://github.com/jstrachan/environment-b/pulls/5
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: c as precondition Environment: a as no status
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

PR https://github.com/jstrachan/environment-b/pulls/1 is now merged
PR https://github.com/jstrachan/environment-b/pulls/1 has commit status success
Creating PR for environment a from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-a
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env a branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 6 and URL https://github.com/jstrachan/environment-a/pulls/6
Creating fake PullRequest number 6 at URL https://github.com/jstrachan/environment-a/pulls/6
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Creating PR for environment b from PipelineActivity jstrachan-parallelrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app parallelrepo version 1.0.1 to namespace jx-b
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env b branch promote-parallelrepo-1.0.1 title parallelrepo to 1.0.1 message Promote parallelrepo to version 1.0.1 with number 6 and URL https://github.com/jstrachan/environment-b/pulls/6
Creating fake PullRequest number 6 at URL https://github.com/jstrachan/environment-b/pulls/6
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-parallelrepo-master-1 repo parallelrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: c as precondition Environment: a as no status
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-parallelrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: parallelrepo
  gitUrl: https://github.com/jstrachan/parallelrepo.git
  pipeline: jstrachan/parallelrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

--- FAIL: TestParallelWorkflow (36.58s)
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:366
        	Error:      	Missing Promote
        	Test:       	TestParallelWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-parallelrepo-master-1 for Environment a
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:367
        	Error:      	Missing Promote
        	Test:       	TestParallelWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-parallelrepo-master-1 for Environment b
    test_helpers.go:278: 
        	Error Trace:	test_helpers.go:278
        	            				controller_workflow_integration_test.go:368
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestParallelWorkflow
        	Messages:   	PipelineActivity status for jstrachan-parallelrepo-master-1
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:394
        	Error:      	Missing Promote
        	Test:       	TestParallelWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-parallelrepo-master-1 for Environment a
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:395
        	Error:      	Missing Promote
        	Test:       	TestParallelWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-parallelrepo-master-1 for Environment b
    test_helpers.go:366: 
        	Error Trace:	test_helpers.go:366
        	            				controller_workflow_integration_test.go:396
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestParallelWorkflow
        	Messages:   	activity status for PipelineActivity jstrachan-parallelrepo-master-1
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:408
        	Error:      	Missing Promote
        	Test:       	TestParallelWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-parallelrepo-master-1 for Environment c
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:409
        	Error:      	Missing Promote
        	Test:       	TestParallelWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-parallelrepo-master-1 for Environment a
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:410
        	Error:      	Missing Promote
        	Test:       	TestParallelWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-parallelrepo-master-1 for Environment b
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:411
        	Error:      	Missing Promote
        	Test:       	TestParallelWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-parallelrepo-master-1 for Environment c
    test_helpers.go:413: 
        	Error Trace:	test_helpers.go:413
        	            				controller_workflow_integration_test.go:413
        	Error:      	Expected value not to be nil.
        	Test:       	TestParallelWorkflow
        	Messages:   	No PullRequest found on repository jstrachan/environment-c for number #1
Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.1 title myrepo to 1.0.1 message Promote myrepo to version 1.0.1 with number 1 and URL https://github.com/jstrachan/environment-staging/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/jstrachan/environment-staging/pulls/1
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-1 repo myrepo version 1.0.1 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.1
  workflow: myflow
status: {}

Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-2 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.2 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.2 title myrepo to 1.0.2 message Promote myrepo to version 1.0.2 with number 2 and URL https://github.com/jstrachan/environment-staging/pulls/2
Creating fake PullRequest number 2 at URL https://github.com/jstrachan/environment-staging/pulls/2
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-2 repo myrepo version 1.0.2 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-2
  namespace: jx
spec:
  build: "2"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.2
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-2
  namespace: jx
spec:
  build: "2"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.2
  workflow: myflow
status: {}

Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-2 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.2 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.2 title myrepo to 1.0.2 message Promote myrepo to version 1.0.2 with number 3 and URL https://github.com/jstrachan/environment-staging/pulls/3
Creating fake PullRequest number 3 at URL https://github.com/jstrachan/environment-staging/pulls/3
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-2 repo myrepo version 1.0.2 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-2 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.2 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.2 title myrepo to 1.0.2 message Promote myrepo to version 1.0.2 with number 4 and URL https://github.com/jstrachan/environment-staging/pulls/4
Creating fake PullRequest number 4 at URL https://github.com/jstrachan/environment-staging/pulls/4
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-2 repo myrepo version 1.0.2 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
PR https://github.com/jstrachan/environment-staging/pulls/2 is now merged
Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-2 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.2 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.2 title myrepo to 1.0.2 message Promote myrepo to version 1.0.2 with number 5 and URL https://github.com/jstrachan/environment-staging/pulls/5
Creating fake PullRequest number 5 at URL https://github.com/jstrachan/environment-staging/pulls/5
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-2 repo myrepo version 1.0.2 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
PR https://github.com/jstrachan/environment-staging/pulls/2 has commit status success
Creating PR for environment staging from PipelineActivity jstrachan-myrepo-master-2 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app myrepo version 1.0.2 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-myrepo-1.0.2 title myrepo to 1.0.2 message Promote myrepo to version 1.0.2 with number 6 and URL https://github.com/jstrachan/environment-staging/pulls/6
Creating fake PullRequest number 6 at URL https://github.com/jstrachan/environment-staging/pulls/6
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline jstrachan-myrepo-master-2 repo myrepo version 1.0.2 with workflow myflow: invalid JSON document
Cannot promote to Environment: production as precondition Environment: staging as no status
YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-2
  namespace: jx
spec:
  build: "2"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.2
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-2
  namespace: jx
spec:
  build: "2"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.2
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-2
  namespace: jx
spec:
  build: "2"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.2
  workflow: myflow
status: {}

YAML: metadata:
  creationTimestamp: null
  name: jstrachan-myrepo-master-2
  namespace: jx
spec:
  build: "2"
  gitOwner: jstrachan
  gitRepository: myrepo
  gitUrl: https://github.com/jstrachan/myrepo.git
  pipeline: jstrachan/myrepo/master
  version: 1.0.2
  workflow: myflow
status: {}

--- FAIL: TestNewVersionWhileExistingWorkflow (18.18s)
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:506
        	Error:      	Missing Promote
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-1 for Environment staging
    test_helpers.go:278: 
        	Error Trace:	test_helpers.go:278
        	            				controller_workflow_integration_test.go:507
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	PipelineActivity status for jstrachan-myrepo-master-1
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:515
        	Error:      	Missing Promote
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-2 for Environment staging
    test_helpers.go:278: 
        	Error Trace:	test_helpers.go:278
        	            				controller_workflow_integration_test.go:516
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	PipelineActivity status for jstrachan-myrepo-master-2
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:543
        	Error:      	Missing Promote
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-2 for Environment staging
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				controller_workflow_integration_test.go:544
        	Error:      	Missing Promote
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-2 for Environment production
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				controller_workflow_integration_test.go:545
        	Error:      	Missing Promote
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	No Promote found on PipelineActivity jstrachan-myrepo-master-2 for Environment production
    test_helpers.go:366: 
        	Error Trace:	test_helpers.go:366
        	            				controller_workflow_integration_test.go:546
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	activity status for PipelineActivity jstrachan-myrepo-master-2
    test_helpers.go:413: 
        	Error Trace:	test_helpers.go:413
        	            				controller_workflow_integration_test.go:548
        	Error:      	Expected value not to be nil.
        	Test:       	TestNewVersionWhileExistingWorkflow
        	Messages:   	No PullRequest found on repository jstrachan/environment-production for number #1
Creating testing Environment in namespace jx-testing
Created environment testing
Job already exists in Jenkins at 
Searching for repositories in Git server https://github.com owner petclinic-gcp includes * excludes WIP-* as user **** 
Downloading Quickstart source zip from https://codeload.github.com/petclinic-gcp/spring-petclinic-vets-service/zip/master with basic auth for user: ****
Generated quickstart at /tmp/test-create-quickstart007826253/myvets
Created project at /tmp/test-create-quickstart007826253/myvets

No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
### PostDraftPack callback copying from /tmp/test-create-quickstart007826253/myvets/charts/spring-petclinic-vets-service to /tmp/test-create-quickstart007826253/myvets/charts/myvets!!!s
replacing placeholders in directory /tmp/test-create-quickstart007826253/myvets
app name: myvets, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-create-quickstart007826253/myvets/.git"
dry-run so skipping import to Jenkins X
Creating config for cluster foo

Created /tmp/test-create-org-struct343244551/clusters/foo/terraform/terraform.tf
Creating config for cluster bar

Created /tmp/test-create-org-struct343244551/clusters/bar/terraform/terraform.tf
Workflow: myflow
promote to a + b + c + d
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/gradle
replacing placeholders in directory /tmp/test-import-projects231595729-DefaultJenkinsfile/gradle_no_files
app name: gradle-no-files, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-DefaultJenkinsfile/gradle_no_files/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/gradle
replacing placeholders in directory /tmp/test-import-projects231595729-RenamedJenkinsfile/gradle_no_files
app name: gradle-no-files, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-RenamedJenkinsfile/gradle_no_files/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-DefaultJenkinsfile/maven_camel
app name: maven-camel, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-DefaultJenkinsfile/maven_camel/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-RenamedJenkinsfile/maven_camel
app name: maven-camel, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-RenamedJenkinsfile/maven_camel/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
trying to use draft pack: maven
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-DefaultJenkinsfile/maven_custom_build_pack
app name: maven-custom-build-pack, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-DefaultJenkinsfile/maven_custom_build_pack/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
trying to use draft pack: maven
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-RenamedJenkinsfile/maven_custom_build_pack
app name: maven-custom-build-pack, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-RenamedJenkinsfile/maven_custom_build_pack/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-DefaultJenkinsfile/maven_keep_old_jenkinsfile
app name: maven-keep-old-jenkinsfile, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-DefaultJenkinsfile/maven_keep_old_jenkinsfile/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-RenamedJenkinsfile/maven_keep_old_jenkinsfile
app name: maven-keep-old-jenkinsfile, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-RenamedJenkinsfile/maven_keep_old_jenkinsfile/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-DefaultJenkinsfile/maven_no_files
app name: maven-no-files, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-DefaultJenkinsfile/maven_no_files/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-RenamedJenkinsfile/maven_no_files
app name: maven-no-files, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-RenamedJenkinsfile/maven_no_files/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-DefaultJenkinsfile/maven_old_jenkinsfile
app name: maven-old-jenkinsfile, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-DefaultJenkinsfile/maven_old_jenkinsfile/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-RenamedJenkinsfile/maven_old_jenkinsfile
app name: maven-old-jenkinsfile, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-RenamedJenkinsfile/maven_old_jenkinsfile/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-DefaultJenkinsfile/maven_springboot
app name: maven-springboot, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-DefaultJenkinsfile/maven_springboot/.git"
dry-run so skipping import to Jenkins X
No username defined for the current Git server!

Git repository created
selected pack: /builder/home/.jx/draft/packs/github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/packs/maven
replacing placeholders in directory /tmp/test-import-projects231595729-RenamedJenkinsfile/maven_springboot
app name: maven-springboot, git server: github.com, org: ****, Docker registry org: ****
skipping directory "/tmp/test-import-projects231595729-RenamedJenkinsfile/maven_springboot/.git"
dry-run so skipping import to Jenkins X
replacing placeholders in directory /tmp/test-replace-placeholders018632700
app name: bar, git server: github.com, org: foo, Docker registry org: registry-org
9e6bf125deac38707319bea1c9d89a9a00cdc6c79 <nil>
Creating PR for environment staging from PipelineActivity myorg-my-app-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app my-app version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-my-app-1.0.1 title my-app to 1.0.1 message Promote my-app to version 1.0.1 with number 1 and URL https://github.com/myorg/environment-staging/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/myorg/environment-staging/pulls/1
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline myorg-my-app-master-1 repo my-app version 1.0.1 with workflow default: invalid JSON document
YAML: metadata:
  creationTimestamp: null
  name: myorg-my-app-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: myorg
  gitRepository: my-app
  gitUrl: https://github.com/myorg/my-app.git
  pipeline: myorg/my-app/master
  version: 1.0.1
  workflow: default
status: {}

YAML: metadata:
  creationTimestamp: null
  name: myorg-my-app-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: myorg
  gitRepository: my-app
  gitUrl: https://github.com/myorg/my-app.git
  pipeline: myorg/my-app/master
  version: 1.0.1
  workflow: default
status: {}

Creating PR for environment staging from PipelineActivity myorg-my-app-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app my-app version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-my-app-1.0.1 title my-app to 1.0.1 message Promote my-app to version 1.0.1 with number 2 and URL https://github.com/myorg/environment-staging/pulls/2
Creating fake PullRequest number 2 at URL https://github.com/myorg/environment-staging/pulls/2
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline myorg-my-app-master-1 repo my-app version 1.0.1 with workflow default: invalid JSON document
PR https://github.com/myorg/environment-staging/pulls/1 is now merged
PR https://github.com/myorg/environment-staging/pulls/1 has commit status success
Creating PR for environment staging from PipelineActivity myorg-my-app-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app my-app version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-my-app-1.0.1 title my-app to 1.0.1 message Promote my-app to version 1.0.1 with number 3 and URL https://github.com/myorg/environment-staging/pulls/3
Creating fake PullRequest number 3 at URL https://github.com/myorg/environment-staging/pulls/3
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline myorg-my-app-master-1 repo my-app version 1.0.1 with workflow default: invalid JSON document
YAML: metadata:
  creationTimestamp: null
  name: myorg-my-app-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: myorg
  gitRepository: my-app
  gitUrl: https://github.com/myorg/my-app.git
  pipeline: myorg/my-app/master
  version: 1.0.1
  workflow: default
status: {}

YAML: metadata:
  creationTimestamp: null
  name: myorg-my-app-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: myorg
  gitRepository: my-app
  gitUrl: https://github.com/myorg/my-app.git
  pipeline: myorg/my-app/master
  version: 1.0.1
  workflow: default
status: {}

Promoting app my-app version 1.2.0 to namespace jx-production
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env production branch promote-my-app-1.2.0 title my-app to 1.2.0 message Promote my-app to version 1.2.0 with number 1 and URL https://github.com/myorg/environment-production/pulls/1
Creating fake PullRequest number 1 at URL https://github.com/myorg/environment-production/pulls/1
Failed to update PipelineActivity: invalid JSON document
YAML: metadata:
  creationTimestamp: null
  name: myorg-my-app-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: myorg
  gitRepository: my-app
  gitUrl: https://github.com/myorg/my-app.git
  pipeline: myorg/my-app/master
  version: 1.0.1
  workflow: default
status: {}

YAML: metadata:
  creationTimestamp: null
  name: myorg-my-app-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: myorg
  gitRepository: my-app
  gitUrl: https://github.com/myorg/my-app.git
  pipeline: myorg/my-app/master
  version: 1.0.1
  workflow: default
status: {}

PR https://github.com/myorg/environment-production/pulls/1 is now merged
PR https://github.com/myorg/environment-production/pulls/1 has commit status success
Creating PR for environment staging from PipelineActivity myorg-my-app-master-1 as current status is (*v1.PromoteActivityStep)(nil)
Promoting app my-app version 1.0.1 to namespace jx-staging
Could not find Jenkins URL services "jenkins" not found in namespace jx
Creating fake Pull Request for env staging branch promote-my-app-1.0.1 title my-app to 1.0.1 message Promote my-app to version 1.0.1 with number 4 and URL https://github.com/myorg/environment-staging/pulls/4
Creating fake PullRequest number 4 at URL https://github.com/myorg/environment-staging/pulls/4
Failed to update PipelineActivity: invalid JSON document
Failed to create PullRequest on pipeline myorg-my-app-master-1 repo my-app version 1.0.1 with workflow default: invalid JSON document
YAML: metadata:
  creationTimestamp: null
  name: myorg-my-app-master-1
  namespace: jx
spec:
  build: "1"
  gitOwner: myorg
  gitRepository: my-app
  gitUrl: https://github.com/myorg/my-app.git
  pipeline: myorg/my-app/master
  version: 1.0.1
  workflow: default
status: {}

--- FAIL: TestPromoteToProductionRun (15.12s)
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				promote_test.go:286
        	            				promote_test.go:19
        	Error:      	Missing Promote
        	Test:       	TestPromoteToProductionRun
        	Messages:   	No Promote found on PipelineActivity myorg-my-app-master-1 for Environment staging
    test_helpers.go:278: 
        	Error Trace:	test_helpers.go:278
        	            				promote_test.go:287
        	            				promote_test.go:19
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestPromoteToProductionRun
        	Messages:   	PipelineActivity status for myorg-my-app-master-1
    test_helpers.go:278: 
        	Error Trace:	test_helpers.go:278
        	            				promote_test.go:307
        	            				promote_test.go:19
        	Error:      	Not equal: 
        	            	expected: "Succeeded"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Succeeded
        	            	+
        	Test:       	TestPromoteToProductionRun
        	Messages:   	PipelineActivity status for myorg-my-app-master-1
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				promote_test.go:313
        	            				promote_test.go:19
        	Error:      	Missing Promote
        	Test:       	TestPromoteToProductionRun
        	Messages:   	No Promote found on PipelineActivity myorg-my-app-master-1 for Environment staging
    test_helpers.go:377: 
        	Error Trace:	test_helpers.go:377
        	            				promote_test.go:315
        	            				promote_test.go:19
        	Error:      	Not equal: 
        	            	expected: "Succeeded"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Succeeded
        	            	+
        	Test:       	TestPromoteToProductionRun
        	Messages:   	PipelineActivity status for myorg-my-app-master-1
    test_helpers.go:378: 
        	Error Trace:	test_helpers.go:378
        	            				promote_test.go:315
        	            				promote_test.go:19
        	Error:      	Not equal: 
        	            	expected: "Succeeded"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Succeeded
        	            	+
        	Test:       	TestPromoteToProductionRun
        	Messages:   	PipelineActivity workflow status for myorg-my-app-master-1
    promote_test.go:60: 
        	Error Trace:	promote_test.go:60
        	Error:      	Received unexpected error:
        	            	invalid JSON document
        	Test:       	TestPromoteToProductionRun
    test_helpers.go:224: 
        	Error Trace:	test_helpers.go:224
        	            				promote_test.go:63
        	Error:      	Missing Promote
        	Test:       	TestPromoteToProductionRun
        	Messages:   	No Promote found on PipelineActivity myorg-my-app-master-1 for Environment production
    test_helpers.go:366: 
        	Error Trace:	test_helpers.go:366
        	            				promote_test.go:64
        	Error:      	Not equal: 
        	            	expected: "Running"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Running
        	            	+
        	Test:       	TestPromoteToProductionRun
        	Messages:   	activity status for PipelineActivity myorg-my-app-master-1
    test_helpers.go:356: 
        	Error Trace:	test_helpers.go:356
        	            				promote_test.go:71
        	Error:      	Missing Promote
        	Test:       	TestPromoteToProductionRun
        	Messages:   	No Promote found on PipelineActivity myorg-my-app-master-1 for Environment production
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
	panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x1cf67d0]

goroutine 577 [running]:
testing.tRunner.func1(0xc00065a500)
	/usr/local/go/src/testing/testing.go:792 +0x387
panic(0x1fa8960, 0x3b3a3f0)
	/usr/local/go/src/runtime/panic.go:513 +0x1b9
github.com/jenkins-x/jx/pkg/jx/cmd_test.TestPromoteToProductionRun(0xc00065a500)
	/home/jenkins/go/src/github.com/jenkins-x/jx/pkg/jx/cmd/promote_test.go:72 +0x600
testing.tRunner(0xc00065a500, 0x240a220)
	/usr/local/go/src/testing/testing.go:827 +0xbf
created by testing.(*T).Run
	/usr/local/go/src/testing/testing.go:878 +0x353
FAIL	github.com/jenkins-x/jx/pkg/jx/cmd	131.570s
?   	github.com/jenkins-x/jx/pkg/jx/cmd/certmanager	[no test files]
?   	github.com/jenkins-x/jx/pkg/jx/cmd/common	[no test files]
?   	github.com/jenkins-x/jx/pkg/jx/cmd/mocks	[no test files]
?   	github.com/jenkins-x/jx/pkg/jx/cmd/mocks/matchers	[no test files]
?   	github.com/jenkins-x/jx/pkg/jx/cmd/templates	[no test files]
ok  	github.com/jenkins-x/jx/pkg/kube	4.599s	coverage: 29.6% of statements
?   	github.com/jenkins-x/jx/pkg/kube/mocks	[no test files]
?   	github.com/jenkins-x/jx/pkg/kube/serviceaccount	[no test files]
?   	github.com/jenkins-x/jx/pkg/kube/services	[no test files]
ok  	github.com/jenkins-x/jx/pkg/kube/vault	0.955s	coverage: 64.9% of statements
?   	github.com/jenkins-x/jx/pkg/log	[no test files]
?   	github.com/jenkins-x/jx/pkg/maven	[no test files]
?   	github.com/jenkins-x/jx/pkg/nodes	[no test files]
?   	github.com/jenkins-x/jx/pkg/pipeline_events	[no test files]
ok  	github.com/jenkins-x/jx/pkg/prow	0.409s	coverage: 81.2% of statements
ok  	github.com/jenkins-x/jx/pkg/prow/config	0.481s	coverage: 9.2% of statements
ok  	github.com/jenkins-x/jx/pkg/quickstarts	0.476s	coverage: 18.4% of statements
ok  	github.com/jenkins-x/jx/pkg/reports	0.081s	coverage: 39.7% of statements
?   	github.com/jenkins-x/jx/pkg/spring	[no test files]
?   	github.com/jenkins-x/jx/pkg/table	[no test files]
ok  	github.com/jenkins-x/jx/pkg/terraform	0.204s	coverage: 6.8% of statements
?   	github.com/jenkins-x/jx/pkg/testkube	[no test files]
?   	github.com/jenkins-x/jx/pkg/tests	[no test files]
ok  	github.com/jenkins-x/jx/pkg/util	10.303s	coverage: 25.2% of statements
?   	github.com/jenkins-x/jx/pkg/util/mocks	[no test files]
ok  	github.com/jenkins-x/jx/pkg/util/system	0.952s	coverage: 33.3% of statements
ok  	github.com/jenkins-x/jx/pkg/vault	0.110s	coverage: 8.7% of statements
ok  	github.com/jenkins-x/jx/pkg/version	0.082s	coverage: 40.0% of statements
?   	github.com/jenkins-x/jx/pkg/workflow	[no test files]
Makefile:98: recipe for target 'test-slow-integration' failed
make: *** [test-slow-integration] Error 1
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build and Release)
Stage "Build and Release" skipped due to earlier failure(s)
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
ERROR: script returned exit code 2
Finished: FAILURE
